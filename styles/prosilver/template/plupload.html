<script type="text/javascript">
//<![CDATA[
phpbb.plupload = {
	i18n: {
		'b': '{{ lang('BYTES_SHORT')|escape('js') }}',
		'kb': '{{ lang('KB')|escape('js') }}',
		'mb': '{{ lang('MB')|escape('js') }}',
		'gb': '{{ lang('GB')|escape('js') }}',
		'tb': '{{ lang('TB')|escape('js') }}',
		'Add Files': '{{ lang('PLUPLOAD_ADD_FILES')|escape('js') }}',
		'Add files to the upload queue and click the start button.': '{{ lang('PLUPLOAD_ADD_FILES_TO_QUEUE')|escape('js') }}',
		'Close': '{{ lang('PLUPLOAD_CLOSE')|escape('js') }}',
		'Drag files here.': '{{ lang('PLUPLOAD_DRAG')|escape('js') }}',
		'Duplicate file error.': '{{ lang('PLUPLOAD_DUPLICATE_ERROR')|escape('js') }}',
		'File: %s': '{{ lang('PLUPLOAD_FILE')|escape('js') }}',
		'File: %s, size: %d, max file size: %d': '{{ lang('PLUPLOAD_FILE_DETAILS')|escape('js') }}',
		'File count error.': '{{ lang('PLUPLOAD_ERR_FILE_COUNT')|escape('js') }}',
		'File extension error.': '{{ lang('PLUPLOAD_EXTENSION_ERROR')|escape('js') }}',
		'File size error.': '{{ lang('PLUPLOAD_SIZE_ERROR')|escape('js') }}',
		'File too large:': '{{ lang('PLUPLOAD_ERR_FILE_TOO_LARGE')|escape('js') }}',
		'Filename': '{{ lang('PLUPLOAD_FILENAME')|escape('js') }}',
		'Generic error.': '{{ lang('PLUPLOAD_GENERIC_ERROR')|escape('js') }}',
		'HTTP Error.': '{{ lang('PLUPLOAD_HTTP_ERROR')|escape('js') }}',
		'Image format either wrong or not supported.': '{{ lang('PLUPLOAD_IMAGE_FORMAT')|escape('js') }}',
		'Init error.': '{{ lang('PLUPLOAD_INIT_ERROR')|escape('js') }}',
		'IO error.': '{{ lang('PLUPLOAD_IO_ERROR')|escape('js') }}',
		'Invalid file extension:': '{{ lang('PLUPLOAD_ERR_FILE_INVALID_EXT')|escape('js') }}',
		'N/A': '{{ lang('PLUPLOAD_NOT_APPLICABLE')|escape('js') }}',
		'Runtime ran out of available memory.': '{{ lang('PLUPLOAD_ERR_RUNTIME_MEMORY')|escape('js') }}',
		'Security error.': '{{ lang('PLUPLOAD_SECURITY_ERROR')|escape('js') }}',
		'Select files': '{{ lang('PLUPLOAD_SELECT_FILES')|escape('js') }}',
		'Size': '{{ lang('PLUPLOAD_SIZE')|escape('js') }}',
		'Start Upload': '{{ lang('PLUPLOAD_START_UPLOAD')|escape('js') }}',
		'Start uploading queue': '{{ lang('PLUPLOAD_START_CURRENT_UPLOAD')|escape('js') }}',
		'Status': '{{ lang('PLUPLOAD_STATUS')|escape('js') }}',
		'Stop Upload': '{{ lang('PLUPLOAD_STOP_UPLOAD')|escape('js') }}',
		'Stop current upload': '{{ lang('PLUPLOAD_STOP_CURRENT_UPLOAD')|escape('js') }}',
		"Upload URL might be wrong or doesn't exist.": '{{ lang('PLUPLOAD_ERR_UPLOAD_URL')|escape('js') }}',
		'Uploaded %d/%d files': '{{ lang('PLUPLOAD_UPLOADED')|escape('js') }}',
		'%d files queued': '{{ lang('PLUPLOAD_FILES_QUEUED')|escape('js') }}',
		'%s already present in the queue.': '{{ lang('PLUPLOAD_ALREADY_QUEUED')|escape('js') }}'
	},
	config: {
		runtimes: 'html5',
		url: '{{ S_PLUPLOAD_URL }}',
		max_file_size: '{{ FILESIZE }}b',
		chunk_size: '{{ CHUNK_SIZE }}b',
		unique_names: true,
		filters: [{{ FILTERS }}],
		{{ S_RESIZE }}
		headers: {
			'X-PHPBB-USING-PLUPLOAD': '1',
			'X-Requested-With': 'XMLHttpRequest',
			'X-PLUPLOAD-KEY': '{{ S_UPLOADER_KEY }}'
		},
		file_data_name: '{{ FORM_NAME }}',
		multipart_params: {
			add_file: '{{ lang('ADD_FILE')|escape('js') }}',
			creation_time: $('[name="creation_time"]', '#postform').val(),
			form_token: $('[name="form_token"]', '#postform').val(),
		},
		form_hook: '#postform',
		browse_button: 'add_files',
		drop_element : 'message',
	},
	lang: {
		ERROR: '{{ lang('ERROR')|escape('js') }}',
		TOO_MANY_ATTACHMENTS: '{{ lang('TOO_MANY_ATTACHMENTS')|escape('js') }}',
	},
	order: '{{ ATTACH_ORDER }}',
	maxFiles: {{ MAX_ATTACHMENTS }},
	data: {% if S_ATTACH_DATA %}{{ S_ATTACH_DATA }}{% else %}[]{% endif %}
};

{% if S_REVISION_FORM %}
	phpbb.plupload.config.multi_selection = false;
	phpbb.plupload.config.multipart_params.new_revision = 1;
	phpbb.plupload.isRevision = true;
{% endif %}
{% if SCREENSHOT_UPLOADER %}
	phpbb.plupload.isScreenshots = true;
{% endif %}

//]]>
</script>
{% INCLUDEJS T_ASSETS_PATH ~ '/plupload/plupload.full.min.js?assets_version=' ~ T_ASSETS_VERSION %}
{% INCLUDEJS T_ASSETS_PATH ~ '/javascript/plupload.js?assets_version=' ~ T_ASSETS_VERSION %}
{% INCLUDEJS T_TITANIA_ASSETS_PATH ~ '/javascript/plupload.js?assets_version=' ~ T_ASSETS_VERSION %}
